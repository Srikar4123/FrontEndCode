<div class="user-container">
  <!-- ================= SIDEBAR ================= -->
  <div class="sidebar" [class.closed]="!sidebarOpen">
    <!-- User Profile -->
    <div class="user-profile">
      <div class="profile-pic">
        <img
          src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"
          alt="User"
        />
      </div>
      <div class="user-info" *ngIf="sidebarOpen">
        <h3>{{ userName }}</h3>
        <p>{{ userPhone }}</p>
        <p class="email">{{ userEmail }}</p>
        <p class="role">{{ userRole }}</p>
      </div>
    </div>

    <!-- Menu -->
    <div class="menu-section" *ngIf="sidebarOpen">
      <!-- Dashboard -->
      <div
        class="menu-item"
        [class.active]="selectedMenu === 'dashboard'"
        (click)="changeMenu('dashboard')"
      >
        <div class="menu-icon">
          <span class="material-symbols-outlined">dashboard</span>
        </div>
        <span class="menu-text">Dashboard</span>
      </div>

      <!-- Browse Books -->
      <div
        class="menu-item"
        [class.active]="selectedMenu === 'browse-books'"
        (click)="changeMenu('browse-books')"
      >
        <div class="menu-icon">
          <span class="material-symbols-outlined">menu_book</span>
        </div>
        <span class="menu-text">Browse Books</span>
      </div>

      <!-- History -->
      <div
        class="menu-item"
        [class.active]="selectedMenu === 'history'"
        (click)="changeMenu('history')"
      >
        <div class="menu-icon">
          <span class="material-symbols-outlined">history</span>
        </div>
        <span class="menu-text">History</span>
      </div>

      <!-- Logout -->
      <div class="menu-item logout-item" (click)="logout()">
        <div class="menu-icon">
          <span class="material-symbols-outlined">logout</span>
        </div>
        <span class="menu-text">Logout</span>
      </div>
    </div>
  </div>

  <!-- ================= MAIN AREA ================= -->
  <div class="main-area" [class.sidebar-closed]="!sidebarOpen">
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="left-section">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <h1>{{ getCurrentTitle() }}</h1>
      </div>

      <button class="home-icon-btn" (click)="goHome()">
        <span class="material-symbols-outlined">home</span>
      </button>
    </div>

    <!-- ================= CONTENT ================= -->
    <div class="content">
      <!-- Dashboard -->
      <div *ngIf="selectedMenu === 'dashboard'" class="page">
        <h2>Dashboard</h2>
        <p>Welcome back, {{ userName }} ðŸ‘‹</p>

        <div class="dashboard-grid">
          <div class="dashboard-card" (click)="changeMenu('browse-books')">
            <span class="material-symbols-outlined">menu_book</span>
            <h3>Browse Books</h3>
            <p>Search and borrow books</p>
          </div>

          <div class="dashboard-card" (click)="changeMenu('history')">
            <span class="material-symbols-outlined">history</span>
            <h3>History</h3>
            <p>Your borrowed books</p>
          </div>
        </div>
      </div>

      <!-- Browse Books -->
      <div *ngIf="selectedMenu === 'browse-books'" class="page">
        <app-browse-books></app-browse-books>
      </div>

      <!-- History -->
      <div *ngIf="selectedMenu === 'history'" class="page">
        <h2>Borrow History</h2>
        <p>All your borrowed and returned books will appear here.</p>
        <!-- (Later you can reuse getLoans(userId) here) -->
      </div>
    </div>
  </div>
</div>
