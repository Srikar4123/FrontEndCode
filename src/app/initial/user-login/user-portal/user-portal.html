<div class="user-container">
  <!-- ================= SIDEBAR ================= -->
  <div class="sidebar" [class.closed]="!sidebarOpen">
    <!-- User Profile -->
    <div class="user-profile">
      <div class="profile-pic">
        <img
          src="https://static.vecteezy.com/system/resources/previews/009/749/643/large_2x/woman-profile-mascot-illustration-female-avatar-character-icon-cartoon-girl-head-face-business-user-logo-free-vector.jpg"
          alt="User"
        />
      </div>
      <div class="user-info" *ngIf="sidebarOpen">
        <h3>{{ userName }}</h3>
        <p class="info-row">
          <span class="material-symbols-outlined info-icon phone-icon">call</span>
          {{ userPhone }}
        </p>

        <!-- <p class="email">{{ userEmail }}</p> -->
        <p class="info-row">
          <span class="material-symbols-outlined info-icon email-icon">mail</span>
          {{ userEmail }}
        </p>
        <!-- <p class="role">{{ userRole }}</p> -->
        <p class="info-row role">
          <span class="material-symbols-outlined info-icon role-icon">info</span>
          {{ userRole }}
        </p>
      </div>
    </div>

    <!-- Menu -->
    <div class="menu-section" *ngIf="sidebarOpen">
      <!-- Dashboard -->
      <div
        class="menu-item"
        [class.active]="selectedMenu === 'dashboard'"
        (click)="changeMenu('dashboard')"
      >
        <div class="menu-icon">
          <span class="material-symbols-outlined">dashboard</span>
        </div>
        <span class="menu-text">Dashboard</span>
      </div>

      <!-- Browse Books -->
      <div
        class="menu-item"
        [class.active]="selectedMenu === 'browse-books'"
        (click)="changeMenu('browse-books')"
      >
        <div class="menu-icon">
          <span class="material-symbols-outlined">menu_book</span>
        </div>
        <span class="menu-text">Browse Books</span>
      </div>

      <!-- History -->
      <!-- <div class="menu-item" routerLink="/history" routerLinkActive="active">
        <div class="menu-icon">
          <span class="material-symbols-outlined">history</span>
        </div>
        <span class="menu-text">History</span>
      </div>
      <router-outlet></router-outlet> -->

      <div class="menu-group">
        <div
          class="menu-item"
          [class.active]="selectedMenu === 'history'"
          (click)="toggleHistory()"
        >
          <div class="menu-icon">
            <span class="material-symbols-outlined">history</span>
          </div>
          <span class="menu-text">History</span>
          <!-- <span class="dropdown-arrow">
            {{ usersDropdownOpen ? 'â–¼' : 'â–¶' }}
          </span> -->
        </div>

        <!-- Users Dropdown -->
        <!-- <div class="dropdown-menu" *ngIf="usersDropdownOpen">
          <div
            class="dropdown-item"
            *ngFor="let subMenu of menus[1].subMenus"
            [class.active]="selectedSubMenu === subMenu.name"
            (click)="selectSubMenu(subMenu.name)"
          >
            <span class="sub-icon">â€¢</span>
            <span>{{ subMenu.title }}</span>
          </div>
        </div> -->
      </div>

      <!-- Logout -->
      <div class="menu-item logout-item" (click)="logout()">
        <div class="menu-icon">
          <span class="material-symbols-outlined">logout</span>
        </div>
        <span class="menu-text">Logout</span>
      </div>
    </div>
  </div>

  <!-- ================= MAIN AREA ================= -->
  <div class="main-area" [class.sidebar-closed]="!sidebarOpen">
    <!-- Top Bar -->
    <div class="top-bar">
      <div class="left-section">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <h1>{{ getCurrentTitle() }}</h1>
      </div>

      <button class="home-icon-btn" (click)="goHome()">
        <span class="material-symbols-outlined">home</span>
      </button>
    </div>

    <!-- ================= CONTENT ================= -->
    <div class="content">
      <!-- Dashboard -->
      <div *ngIf="selectedMenu === 'dashboard'" class="page">
        <h2>Dashboard</h2>
        <p>Welcome back, {{ userName }} ðŸ‘‹</p>

        <div class="dashboard-grid">
          <div class="dashboard-card" (click)="changeMenu('browse-books')">
            <span class="material-symbols-outlined">menu_book</span>
            <h3>Browse Books</h3>
            <p>Search and borrow books</p>
          </div>

          <div class="dashboard-card" (click)="changeMenu('history')">
            <span class="material-symbols-outlined">history</span>
            <h3>History</h3>
            <p>Your borrowed books</p>
          </div>
        </div>
      </div>

      <div class="page" [hidden]="selectedMenu !== 'browse-books'">
        <app-browse-books></app-browse-books>
      </div>

      <div class="page" [hidden]="selectedMenu !== 'history'">
        <app-history></app-history>
      </div>
    </div>
  </div>
</div>
